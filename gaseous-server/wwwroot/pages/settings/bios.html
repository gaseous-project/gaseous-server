<div id="gametitle">
    <h1 id="gametitle_label">Firmware</h1>
</div>

<h3>Firmware Availablility</h3>
<table id="table_firmware" class="romtable" cellspacing="0">

</table>

<script type="text/javascript">
    ajaxCall('/api/v1.0/Bios', 'GET', function (result) {
        result.sort((a, b) => a.platformname.charCodeAt(0) - b.platformname.charCodeAt(0));

        var lastPlatform = '';

        var newTable = document.getElementById('table_firmware');
        newTable.appendChild(createTableRow(true, ['Description', 'File name', 'MD5 Hash', 'Available']));

        for (var i = 0; i < result.length; i++) {
            if (result[i].platformname != lastPlatform) {
                lastPlatform = result[i].platformname;
                var platformRow = document.createElement('tr');
                var platformHeader = document.createElement('th');
                platformHeader.setAttribute('colspan', 4);
                platformHeader.innerHTML = result[i].platformname;
                platformRow.appendChild(platformHeader);
                newTable.appendChild(platformRow);
            }

            var biosFilename = document.createElement('a');
            biosFilename.href = '/api/v1.0/Bios/' + result[i].platformid + '/' + result[i].filename;
            biosFilename.innerHTML = result[i].filename;
            biosFilename.className = 'romlink';

            var availableText = document.createElement('span');
            if (result[i].available == true) {
                availableText.innerHTML = 'Available';
                availableText.className = 'greentext';

                biosFilename = document.createElement('a');
                biosFilename.href = '/api/v1.0/Bios/' + result[i].platformid + '/' + result[i].filename;
                biosFilename.innerHTML = result[i].filename;
                biosFilename.className = 'romlink';
            } else {
                availableText.innerHTML = 'Unavailable';
                availableText.className = 'redtext';

                biosFilename = document.createElement('span');
                biosFilename.innerHTML = result[i].filename;
            }

            var newRow = [
                result[i].description,
                biosFilename,
                result[i].hash,
                availableText
            ];
            newTable.appendChild(createTableRow(false, newRow, 'romrow', 'romcell'));
        }
    });
</script>