<div id="bgImage" style="background-image: url('/images/SettingsWallpaper.jpg'); background-position: center; background-repeat: no-repeat; background-size: cover; filter: blur(10px); -webkit-filter: blur(10px);">
    <div id="bgImage_Opacity"></div>
</div>

<div id="gamepage">
    <div id="properties_toc" class="settings_toc">
        <div class="filter_header">Settings</div>
        <div id="properties_toc_system" name="properties_toc_item" onclick="SelectTab('system');">System</div>
        <div id="properties_toc_settings" name="properties_toc_item" onclick="SelectTab('settings');" style="display: none;">Settings</div>
        <div id="properties_toc_users" name="properties_toc_item" onclick="SelectTab('users');" style="display: none;">Users</div>
        <div id="properties_toc_mapping" name="properties_toc_item" onclick="SelectTab('mapping');" style="display: none;">Platform Mapping</div>
        <div id="properties_toc_bios" name="properties_toc_item" onclick="SelectTab('bios');">Firmware</div>
        <div id="properties_toc_logs" name="properties_toc_item" onclick="SelectTab('logs');" style="display: none;">Logs</div>
        <div id="properties_toc_about" name="properties_toc_item" onclick="SelectTab('about');">About</div>
    </div>
    <div id="properties_bodypanel">
    </div>

    
</div>

<div id="settings_photocredit">
    Wallpaper by <a href="https://unsplash.com/@lorenzoherrera" class="romlink">Lorenzo Herrera</a> / <a href="https://unsplash.com/photos/p0j-mE6mGo4" class="romlink">Unsplash</a>
</div>

<script type="text/javascript">
    if (userProfile.roles.includes("Admin")) {
        document.getElementById('properties_toc_settings').style.display = '';
        document.getElementById('properties_toc_users').style.display = '';
        document.getElementById('properties_toc_mapping').style.display = '';
        document.getElementById('properties_toc_logs').style.display = '';
    }
    if (userProfile.roles.includes("Gamer")) {
        document.getElementById('properties_toc_mapping').style.display = '';
    }

    var myParam = getQueryString('sub', 'string');

    var selectedTab = '';

    if (myParam) {
        selectedTab = myParam;
    } else {
        selectedTab = 'system';
    }

    SelectTab(selectedTab);

    function SelectTab(TabName) {
        if (selectedTab != TabName) {
            window.location.href = '/index.html?page=settings&sub=' + TabName;
        }

        var tocs = document.getElementsByName('properties_toc_item');
        for (var i = 0; i < tocs.length; i++) {
            if ((tocs[i].id) == ("properties_toc_" + TabName)) {
                tocs[i].className = "properties_toc_item_selected";
            } else {
                tocs[i].className = '';
            }
        }

        $('#properties_bodypanel').load('/pages/settings/' + TabName + '.html?v=' + AppVersion);
    }
</script>
